services:
  backend:
    image: ${DOCKER_USERNAME}/community-backend:latest
    container_name: community-backend
    restart: unless-stopped
    environment:
      SPRING_DATASOURCE_URL: ${SPRING_DATASOURCE_URL}
      SPRING_DATASOURCE_USERNAME: ${SPRING_DATASOURCE_USERNAME}
      SPRING_DATASOURCE_PASSWORD: ${SPRING_DATASOURCE_PASSWORD}
      CORS_ALLOWED_ORIGINS: ${CORS_ALLOWED_ORIGINS}
      SPRING_CONFIG_IMPORT: ${SPRING_CONFIG_IMPORT}
    volumes:
      - ./logs:/app/logs
      - ${SECRETS_PATH}:/app/application-secret.yml:ro
    networks:
      - community-network

networks:
  community-network:
    name: community-network
    external: true
